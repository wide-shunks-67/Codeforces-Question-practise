#include<iostream>#include<vector>#include<algorithm>#define ll long longusing namespace std;int main(){    ios_base::sync_with_stdio(false);    cin.tie(NULL);    int  t;    cin>>t;    while(t--){        int n;        cin>>n;        vector<int> a(n),b(n),c(n);        for(int i=0;i<n;i++) cin>>a[i];        for(int i=0;i<n;i++) cin>>b[i];        for(int i=0;i<n;i++) cin>>c[i];        ll valid_count_AB=0;        for(int i=0;i<n;i++){//shift b by i            bool valid_for_a=true;            for(int j=0;j<n;j++){                if(a[j]>=b[(i+j)%n]){                    valid_for_a=false;                    break;                }            }            if(valid_for_a) valid_count_AB++;        }         ll valid_count_BC=0;        for(int i=0;i<n;i++){            bool valid_for_b=true;            for(int j=0;j<n;j++){//shift c by i                if(b[j]>=c[(i+j)%n]){                    valid_for_b=false;                    break;                }            }            if(valid_for_b) valid_count_BC++;        }         ll ans= (ll)n * valid_count_AB * valid_count_BC;        cout<<ans;        cout<<"\n";    }}